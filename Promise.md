# :mortar_board: Promise

| :coffee: [–ü—Ä–∏–º–µ—Ä—ã](#samples) | [:frog: –ü—Ä–æ–º–∏—Å –≤ –∫–∞—Ä—Ç–∏–Ω–∫–∞—Ö](Promise-through-pictures) |
|-|-|

***

#### –ì–¥–µ –∂–∏–≤—É—Ç –∫–æ–ª–±—ç–∫–∏ ?

–ü–æ–Ω—è—Ç–∏–µ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ—Å—Ç–∏ —Å–≤—è–∑–∞–Ω–æ —Å –ø–æ–Ω—è—Ç–∏–µ–º —Ñ—É–Ω–∫—Ü–∏–∏ –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –≤—ã–∑–æ–≤–∞ ( _callback_ )

–ö–æ–ª–±—ç–∫–∏ - –æ–±—ã—á–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ —Å –Ω–µ–æ–±—ã—á–Ω—ã–º –≤—ã–∑–æ–≤–æ–º

–¢.–µ. –Ω–∞—à —Å–∫—Ä–∏–ø—Ç –∏—Ö, –∫–∞–∫ –ø—Ä–∞–≤–∏–ª–æ, –Ω–µ –≤—ã–∑—ã–≤–∞–µ—Ç

–ò, —Ç–µ–º –Ω–µ –º–µ–Ω–µ–µ, –æ–Ω–∏ –∏—Å–ø–æ–ª–Ω—è—é—Ç—Å—è

–ò—Å–ø–æ–ª–Ω—è—é—Ç—Å—è –æ–Ω–∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω–æ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞

–ö–∞–∫ –±—ã "–∂–∏–≤—É—Ç –≤ –¥—Ä—É–≥–æ–º –∏–∑–º–µ—Ä–µ–Ω–∏–∏", –∏ –≤ –Ω–µ–ø—Ä–µ–¥—Å–∫–∞–∑—É–µ–º—ã–µ –º–æ–º–µ–Ω—Ç—ã –≤—Ä–µ–º–µ–Ω–∏ –ø–æ—è–≤–ª—è—é—Ç—Å—è –≤ –Ω–∞—à–µ–º "–∏–∑–º–µ—Ä–µ–Ω–∏–∏"

–§—É–Ω–∫—Ü–∏—è –æ–±—Ä–∞—Ç–Ω–æ–≥–æ –≤—ã–∑–æ–≤–∞ –≤—Å–µ–≥–¥–∞ "–ø—Ä–∏–≤—è–∑–∞–Ω–∞" –∫ –∫–∞–∫–æ–º—É-—Ç–æ —Å–æ–±—ã—Ç–∏—é –≤ –±—Ä–∞—É–∑–µ—Ä–µ

1. —Å–æ–±—ã—Ç–∏–µ –º–æ–∂–µ—Ç –∏—Å—Ö–æ–¥–∏—Ç—å –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ( –º—ã—à—å, –∫–ª–∞–≤–∏–∞—Ç—É—Ä–∞, pointer –Ω–∞ —Å–µ–Ω—Å–æ—Ä–Ω—ã—Ö –¥–µ–≤–∞–π—Å–∞—Ö... )
2. –º–æ–∂–µ—Ç –±—ã—Ç—å —Å–≤—è–∑–∞–Ω–æ —Å —Å–µ—Ä–≤–µ—Ä–æ–º, –ø–æ—Å–∫–æ–ª—å–∫—É –Ω–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ—Ç –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –¥–∞–Ω–Ω—ã–µ
3. –∫—Ä–æ–º–µ —Ç–æ–≥–æ, –µ—Å—Ç—å –µ—â–µ —Ç–∞–π–º–µ—Ä—ã - –æ—Ç–¥–µ–ª—å–Ω–∞—è –ø–µ—Å–Ω—è

–í—Å–µ —ç—Ç–∏ —Å–æ–±—ã—Ç–∏—è —Å–≤—è–∑—ã–≤–∞–µ—Ç —Å–ª–µ–¥—É—é—â–µ–µ: 

* –æ–Ω–∏ –º–æ–≥—É—Ç –ø—Ä–æ–∏–∑–æ–π—Ç–∏ –≤ –ª—é–±–æ–µ –≤—Ä–µ–º—è
* –ø–µ—Ä–≤—ã–º –æ–± —ç—Ç–æ–º —É–∑–Ω–∞–µ—Ç –±—Ä–∞—É–∑–µ—Ä - –æ—Å–Ω–æ–≤–Ω–æ–π "—Ö–æ—Å—Ç" —Å–æ–±—ã—Ç–∏–π
* –±—Ä–∞—É–∑–µ—Ä –¥–æ–ª–∂–µ–Ω –∑–Ω–∞—Ç—å, —á—Ç–æ –Ω—É–∂–Ω–æ –¥–µ–ª–∞—Ç—å, –∫–æ–≥–¥–∞ —Å–æ–±—ã—Ç–∏–µ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç
* –¥–ª—è —ç—Ç–æ–≥–æ –∏ –Ω—É–∂–Ω—ã –∫–æ–ª–±—ç–∫–∏

–§—É–Ω–∫—Ü–∏–∏ —è–≤–ª—è—é—Ç—Å—è –∫–æ–ª–±—ç–∫–∞–º–∏, –µ—Å–ª–∏ –æ–Ω–∏ –Ω–µ –≤—ã–∑—ã–≤–∞—é—Ç—Å—è –∏–∑ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø–æ—Ç–æ–∫–∞, –∞ "–≤–æ–∑–≤—Ä–∞—â–∞—é—Ç—Å—è" –∏–∑ [**`Event Loop`**](event-loop)

***

#### –ó–∞—á–µ–º –Ω—É–∂–Ω—ã –ø—Ä–æ–º–∏—Å—ã ?

–ü—Ä–æ–º–∏—Å—ã - —ç—Ç–æ —Å–ø–æ—Å–æ–± –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –∫–æ–¥–∞

–ú–æ–∂–Ω–æ —Å–∫–∞–∑–∞—Ç—å –±–æ–ª—å—à–µ: —ç—Ç–æ —Å–ø–æ—Å–æ–± —Å–æ–∑–¥–∞–Ω–∏—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –∫–æ–¥–∞

–ü—Ä–æ–º–∏—Å—ã - —ç—Ç–æ "–æ–±–µ—Ä—Ç–∫–∞"

–ö–æ–¥, –∑–∞–≤–µ—Ä–Ω—É—Ç—ã–π –≤ –ø—Ä–æ–º–∏—Å, —Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–º, –¥–∞–∂–µ –Ω–µ –±—É–¥—É—á–∏ —Å–≤—è–∑–∞–Ω —Å –∫–∞–∫–∏–º-–ª–∏–±–æ —Å–æ–±—ã—Ç–∏–µ–º –≤ –±—Ä–∞—É–∑–µ—Ä–µ

–¢.–µ. –æ–Ω –Ω–µ –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω—è—Ç—å—Å—è –≤ –æ—Å–Ω–æ–≤–Ω–æ–º ( –∏ –µ–¥–∏–Ω—Å—Ç–≤–µ–Ω–Ω–æ–º ) –ø–æ—Ç–æ–∫–µ —Å–∫—Ä–∏–ø—Ç–∞

–û–Ω "–≤–µ—Ä–Ω–µ—Ç—Å—è", –∫–æ–≥–¥–∞ –æ—Å–Ω–æ–≤–Ω–æ–π ( —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π ) –∫–æ–¥ –æ—Ç—Ä–∞–±–æ—Ç–∞–µ—Ç

## –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä Promise

–°–æ–∑–¥–∞–Ω–∏–µ —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ **`Promise`** - —ç—Ç–æ –±–∞–Ω–∞–ª—å–Ω—ã–π –≤—ã–∑–æ–≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞

```javascript
const promise = new Promise ( ... )
```

:warning: –ö–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—É –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è —Ñ—É–Ω–∫—Ü–∏—è - —ç—Ç–æ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ

```javascript
const promise = new Promise ( 
    function ( ... ) {
        ...
    } 
)
```

–ï—Å–ª–∏ –≤—ã–∑–≤–∞—Ç—å –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä **`Promise`** –±–µ–∑ –∞—Ä–≥—É–º–µ–Ω—Ç–∞:

```javascript
const promise = new Promise ()
```

–±—É–¥–µ—Ç —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–æ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ

```console
‚õîÔ∏è Uncaught TypeError: Promise resolver undefined is not a function
```

***

–§—É–Ω–∫—Ü–∏—è-–∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å –±—É–¥–µ—Ç –≤—ã–∑–≤–∞–Ω–∞ –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –ø–æ—Ç–æ–∫–µ, —Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ, —Å—Ä–∞–∑—É –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø—Ä–æ–º–∏—Å–∞

```javascript
console.log ( "Start" )

new Promise ( () => console.log ( "Promise starts" ) )

console.log ( "End" )
```

###### console

```console
Start
Promise starts
End
```

***

–ü—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è, —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è, –ø–µ—Ä–µ–¥–∞–≤–∞–µ–º–æ–π –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—É **`Promise`** ( –¥–∞–≤–∞–π—Ç–µ –≤ –¥–∞–ª—å–Ω–µ–π—à–µ–º –Ω–∞–∑—ã–≤–∞—Ç—å –µ–µ "**_–∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å_**" ), –∑–∞–ø—É—Å–∫–∞–µ—Ç –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å

* —ç—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å —Ç–∞–π–º–µ—Ä
* —ç—Ç–æ –º–æ–∂–µ—Ç –±—ã—Ç—å AJAX

–û–¥–Ω–∞–∫–æ, –∫–∞–∫ –º—ã –≤–∏–¥–∏–º –∏–∑ –ø—Ä–∏–º–µ—Ä–∞ –≤—ã—à–µ, —ç—Ç–æ –≤–æ–≤—Å–µ –Ω–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ :wink:

–ö–æ–≥–¥–∞ –ø—Ä–æ—Ü–µ—Å—Å, –∑–∞–ø—É—â–µ–Ω–Ω—ã–π —Ñ—É–Ω–∫—Ü–∏–µ–π-–∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª–µ–º, –∑–∞–≤–µ—Ä—à–∏—Ç—Å—è ( –∞ –µ—Å–ª–∏ –æ–Ω –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π, —Ç–æ –≤—Ä–µ–º—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ ), —Ç–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–º –º–æ–≥—É—Ç –±—ã—Ç—å –∫–∞–∫–∏–µ-—Ç–æ –¥–∞–Ω–Ω—ã–µ

* –ª–∏–±–æ —ç—Ç–æ –¥–∞–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ –∂–¥–µ—Ç –Ω–∞—à —Å–∫—Ä–∏–ø—Ç
* –ª–∏–±–æ —ç—Ç–æ –æ–±—ä–µ–∫—Ç –æ—à–∏–±–∫–∏, –∫–æ—Ç–æ—Ä–∞—è –≤–æ–∑–Ω–∏–∫–ª–∞ –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ [ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π ] –æ–ø–µ—Ä–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä—É—é –∑–∞–ø—É—Å—Ç–∏–ª–∞ —Ñ—É–Ω–∫—Ü–∏—è

–ù–æ –æ–Ω–∞ –Ω–µ –≤–µ—Ä–Ω–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç –¥–æ —Ç–µ—Ö –ø–æ—Ä, –ø–æ–∫–∞ –Ω–µ —É–∑–Ω–∞–µ—Ç, –∫–æ–º—É –µ–≥–æ –Ω—É–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å

–ü–æ—ç—Ç–æ–º—É —É —Ñ—É–Ω–∫—Ü–∏–∏-–∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è –µ—Å—Ç—å –¥–≤–∞ —Ñ–æ—Ä–º–∞–ª—å–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ - –∫–æ–ª–±—ç–∫–∏

```javascript
const promise = new Promise ( 
    function ( resolve, reject ) {
        ...
    } 
)
```

–∑–¥–µ—Å—å **`resolve`** –∏ **`reject`** - –∫–æ–ª–±—ç–∫-—Ñ—É–Ω–∫—Ü–∏–∏

–í –ø—Ä–∏–Ω—Ü–∏–ø–µ, —Ñ—É–Ω–∫—Ü–∏—è-–∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—å –≤–æ–ª—å–Ω–∞ –≤—ã–∑—ã–≤–∞—Ç—å –∏—Ö –ø–æ —Å–≤–æ–µ–º—É ( —Ç.–µ. –Ω–∞—à–µ–º—É ) —É—Å–º–æ—Ç—Ä–µ–Ω–∏—é

–ù–∞–ø—Ä–∏–º–µ—Ä, —Ç–∞–∫:

```javascript
new Promise (
    ( resolve, reject ) =>
        new Date().getSeconds() > 30 ? 
            resolve ( new Date().getSeconds() ) : 
            reject ( new Error (
                `Time is out: ${new Date().getSeconds()}` )
            )
)
```

–ù–æ –≤–æ—Ç —Å–æ–≤—Å–µ–º –¥—Ä—É–≥–æ–µ –¥–µ–ª–æ - –∫–∞–∫ –ø–µ—Ä–µ–¥–∞—Ç—å –µ–π –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–µ —Å—Å—ã–ª–∫–∏ –Ω–∞ –∫–æ–ª–±—ç–∫–∏

–í–æ—Ç –∑–¥–µ—Å—å –Ω–∞—à–∞ "–æ–±–µ—Ä—Ç–∫–∞" –∏ –ø—Ä–∏–≥–æ–¥–∏—Ç—Å—è

–ü–æ—Ç–æ–º—É —á—Ç–æ —É —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ `Promise` –µ—Å—Ç—å –º–µ—Ç–æ–¥—ã **_`then`_** –∏ **_`catch`_**

–≠—Ç–∏–º –º–µ—Ç–æ–¥–∞–º –º—ã –∏ –ø–µ—Ä–µ–¥–∞–¥–∏–º —Ä–µ–∞–ª—å–Ω—ã–µ –∫–æ–ª–±—ç–∫-—Ñ—É–Ω–∫—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –±—É–¥—É—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã –≤–º–µ—Å—Ç–æ —Ñ–æ—Ä–º–∞–ª—å–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ **`resolve`** –∏ **`reject`**

```javascript
new Promise (
    ( resolve, reject ) =>
        new Date().getSeconds() > 30 ? 
            resolve ( new Date().getSeconds() ) : 
            reject ( new Error (
                `Time is out: ${new Date().getSeconds()}` )
            )
)
    .then ( data => console.log ( data ) )
    .catch ( err => console.warn ( err ) )
```

***

–î–∞–≤–∞–π—Ç–µ –ø–æ–º–æ—Ç—Ä–∏–º, —á—Ç–æ –ø—Ä–æ–∏–∑–æ–π–¥–µ—Ç, –µ—Å–ª–∏ –º—ã —Å–æ–∑–¥–∞–¥–∏–º —ç–∫–∑–µ–º–ø–ª—è—Ä `Promise` –∑–Ω–∞—á–∏—Ç–µ–ª—å–Ω–æ —Ä–∞–Ω—å—à–µ, —á–µ–º –ø–æ–≤–µ—Å–∏–º –∫–æ–ª–±—ç–∫–∏ —Å –ø–æ–º–æ—â—å—é –º–µ—Ç–æ–¥–æ–≤ **_`then`_** –∏ **_`catch`_**

```javascript
var test = new Promise (
    resolve => 
        resolve ( `Time: ${new Date().getSeconds()}/` )
)
```

–í—ã–∂–¥–∞–≤ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ–∫—É–Ω–¥, –≤—ã–ø–æ–ª–Ω–∏–º –∫–æ–¥:

```javascript
console.log ( "Start" )
test
    .then ( data => console.log ( data, new Date().getSeconds() ) )

console.log ( "End" )
```

–í –∫–æ–Ω—Å–æ–ª–∏ –º—ã —É–≤–∏–¥–∏–º —á—Ç–æ-—Ç–æ –≤—Ä–æ–¥–µ:

```
Start
End
Time: 24/ 36
```

–¢.–µ. –≤ –º–µ–º–µ–Ω—Ç —Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ–º–∏—Å–∞ `test` –±—ã–ª–æ 24 —Å–µ–∫—É–Ω–¥—ã, –∞ –∫–æ–≥–¥–∞ –º—ã –¥–æ–±–∞–≤–∏–ª–∏ –∫–æ–ª–±—ç–∫–∏, –±—ã–ª–æ —É–∂–µ 36 —Å–µ–∫—É–Ω–¥

***

–î–∞–≤–∞–π—Ç–µ —É–º—ã—à–ª–µ–Ω–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ–º –æ–±—ã—á–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏, —É –∫–æ—Ç–æ—Ä—ã—Ö –µ—Å—Ç—å –æ–±—ä–µ–∫—Ç `aguments` –∏, —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ, `aguments.callee`

–ü—É—Å—Ç—å –≤—Å–µ –Ω–∞—à–∏ —Ñ—É–Ω–∫—Ü–∏–∏ –≤—ã–≤–æ–¥—è—Ç –≤ –∫–æ–Ω—Å–æ–ª—å —Å–≤–æ–µ –∏–º—è

–¢–∞–∫ –º—ã —Å–º–æ–∂–µ–º —É–≤–∏–¥–µ—Ç—å, –∫–∞–∫ –æ–Ω–∏ –≤—ã–∑—ã–≤–∞—é—Ç—Å—è –∏ –æ—Ç—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç

```javascript
console.log ( "Start" )

new Promise (
    function executor ( resolve, reject ) {
        console.log ( arguments.callee.name )
        Math.random() >= 0.5 ? 
            resolve ( arguments.callee.name ) : 
            reject ( new Error ( arguments.callee.name ) )
    }
)
    .then (
        function resolve ( data ) {
            console.log ( `${arguments.callee.name}: ${data}` )
        }
    )
    .catch (
        function reject ( err ) {
            console.log ( `${arguments.callee.name}: ${err}` )
        }
    )

console.log ( "End" )
```

###### –†–µ–∑—É–ª—å—Ç–∞—Ç –≤ —Å–ª—É—á–∞–µ —Ä–µ–∑–æ–ª–≤–∞:

```console
Start
executor
End
resolve: executor
```

###### –†–µ–∑—É–ª—å—Ç–∞—Ç –≤ —Å–ª—É—á–∞–µ —Ä–µ–¥–∂–µ–∫—Ç–∞:

```console
Start
executor
End
reject: Error: executor
```

–ö–∞–∫ –º—ã –≤–∏–¥–∏–º, **`executor`** –±—ã–ª–∞ –≤—ã–∑–≤–∞–Ω–∞ —Å—Ä–∞–∑—É –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –ø—Ä–æ–º–∏—Å–∞

–ó–∞—Ç–µ–º —Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π –ø–æ—Ç–æ–∫ –æ—Ç—Ä–∞–±–æ—Ç–∞–ª, –∏ –≤–µ—Ä–Ω—É–ª—Å—è –∫–æ–ª–±—ç–∫

–í –ø–µ—Ä–≤–æ–º —Å–ª—É—á–∞–µ - **`resolve`**

–í–æ –≤—Ç–æ—Ä–æ–º - **`reject`**

–ö–∞–∂–¥—ã–π –∏–∑ –Ω–∏—Ö –≤—ã–≤–µ–ª —Å–≤–æ–µ –∏–º—è –∏ –ø–µ—Ä–µ–¥–∞–Ω–Ω—ã–µ –µ–º—É –¥–∞–Ω–Ω—ã–µ

–ö–æ–ª–±—ç–∫—É **`resolve`** –±—ã–ª–æ –ø–µ—Ä–µ–¥–∞–Ω–æ –∏–º—è —Ñ—É–Ω–∫—Ü–∏–∏-–∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è

–ö–æ–ª–±—ç–∫—É **`reject`** –±—ã–ª –ø–µ—Ä–µ–¥–∞–Ω –æ–±—ä–µ–∫—Ç –æ—à–∏–±–∫–∏ —Å –∏–º–µ–Ω–µ–º —Ñ—É–Ω–∫—Ü–∏–∏-–∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è

–ü—Ä–∏ —ç—Ç–æ–º –Ω–∏—á–µ–≥–æ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ –≤ –∫–æ–¥–µ —Ñ—É–Ω–∫—Ü–∏–∏-–∏—Å–ø–æ–ª–Ω–∏—Ç–µ–ª—è –Ω–µ –±—ã–ª–æ

–û–¥–Ω–∞–∫–æ –∫–æ–ª–±—ç–∫–∏ –æ—Ç—Ä–∞–±–æ—Ç–∞–ª–∏ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ

***

–í –ø—Ä–∏–Ω—Ü–∏–ø–µ, –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º–µ—Ç–æ–¥–∞ **`ca


```javascript
console.log ( "Start" )

new Promise (
    ( resolve, reject ) => {
        console.log ( "Promise starts" )
        Math.random() > 0.4 ? resolve( "Resolve" ) : 
            reject ( new Error ( "The promise was rejected" ) )
    })
    .then(
        data => console.log ( data ),
        err => console.warn ( err )
    )

console.log ( "End" )
```

–î–ª—è —ç—Ç–æ–≥–æ —É –Ω–µ–µ –µ—Å—Ç—å –¥–≤–∞ —Ñ–æ—Ä–º–∞–ª—å–Ω—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ - —Å—Å—ã–ª–∫–∏ –Ω–∞ –∫–æ–ª–±—ç–∫-—Ñ—É–Ω–∫—Ü–∏–∏: 
* –ø–µ—Ä–≤—ã–π –∫–æ–ª–±—ç–∫ - –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –µ–º—É 

–û–¥–Ω–∞–∫–æ –Ω–µ –±–∞–Ω–∞–ª—å–Ω—ã–º –∑–¥–µ—Å—å —è–≤–ª—è–µ—Ç—Å—è —Ç–æ, —á—Ç–æ –º—ã –Ω–µ —Å—Ä–∞–∑—É –ø–µ—Ä–µ–¥–∞–µ–º –∫–æ–ª–±—ç–∫-—Ñ—É–Ω–∫—Ü–∏—é

–ú—ã –∑–∞–≤–æ—Ä–∞—á–∏–≤–∞–µ–º –∫–æ–¥ 

–ë–æ–ª–µ–µ —Ç–æ–≥–æ, –º—ã –ø–µ—Ä–µ–¥–∞–µ–º –Ω

```javascript
console.log ( "Start" )

new Promise (
    ( resolve, reject ) => 
        Math.random() > 0.4 ? resolve( {
            name: "Google",
            type: "service"
        } ) : 
        reject ( new Error ( "The promise was rejected" ) ),
    )
    .then(
        data => console.log ( data ),
        err => console.warn ( err, data )
    )

console.log ( "End" )
```


***

```javascript
function fetchData() {
    return new Promise (
        ( resolve, reject ) => setTimeout (
            () => Math.random() > 0.4 ? resolve( {
                    name: "Google",
                    type: "service"
                } ) : 
                reject ( new Error ( "The promise was rejected" ) ),
            Math.round ( Math.random() * 5000 )
        )
    )
}

fetchData()
    .then(
        data => console.log ( data ),
        err => console.warn ( err )
    )
```

***

<a name="samples"></a>
### :coffee: –ü—Ä–∏–º–µ—Ä—ã

–ò—Ç–∞–∫, –æ–±—ä–µ–∫—Ç ü§ñ —Å–æ–∑–¥–∞–µ—Ç—Å—è —Å –ø–æ–º–æ—â—å—é –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞ **`Promise`**

–ü–∞—Ä–∞–º–µ—Ç—Ä, –∫–æ—Ç–æ—Ä—ã–π –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—É - —ç—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è, –≤—ã–ø–æ–ª–Ω—è—é—â–∞—è –Ω–µ–∫—É—é –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—É—é –æ–ø–µ—Ä–∞—Ü–∏—é

–≠—Ç–∞ —Ñ—É–Ω–∫—Ü–∏—è, –≤ —Å–≤–æ—é –æ—á–µ—Ä–µ–¥—å, –ø–æ–ª—É—á–∞–µ—Ç –Ω–∞ –≤—Ö–æ–¥–µ –¥–≤–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞, –æ–±–∞ - –∫–æ–ª–ª–±—ç–∫–∏, —Ç.–µ. —Ñ—É–Ω–∫—Ü–∏–∏

***

:coffee: :one:

```javascript
var promise = new Promise ( 
    function ( resolve, reject ) { 
        ...
        if ( ... ) resolve 
        else reject 
    } 
)
```

***

:coffee: :two:

–ò—Å–ø–æ–ª—å–∑—É–µ–º Battery API  –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ –æ –∑–∞—Ä—è–¥–∫–µ –∞–∫–∫—É–º—É–ª—è—Ç–æ—Ä–∞

( –º–µ—Ç–æ–¥  **_getBattery()_**  –æ–±—ä–µ–∫—Ç–∞  **navigator** –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–æ–º–∏—Å ):
```javascript
navigator.getBattery().then ( result => {
    for ( var x in result ) 
        console.log ( `${x}: ${result[x]}` )
})
```

***

:coffee: :three:

```javascript
var promises = [
    new Promise ( resolve => setTimeout ( () => resolve ( "Hello" ), 1000 ) ),
    new Promise ( resolve => setTimeout ( () => resolve ( "Bye" ), 3000 ) ),
    new Promise ( resolve => setTimeout ( () => resolve ( "How are you?" ), 2000 ) )
]

Promise.all ( promises ).then ( response => document.body.innerHTML += `<p>${response}</p>` )
```

***

| [:coffee: :four:](https://plnkr.co/edit/WpZrRvD1ScHbCN3eUfC8?p=preview) | [:coffee: :five:](https://plnkr.co/edit/BpFFu73mwsXDmZSdVOTn?p=preview) | [:coffee: :six:](https://repl.it/@garevna/promise-sample-1) |
|-|-|-|

***

:coffee: :seven:

–î–ª—è –ø–æ–Ω–∏–º–∞–Ω–∏—è –ø–æ–ª–µ–∑–Ω–æ—Å—Ç–∏ –ø—Ä–æ–º–∏—Å–æ–≤ –≤ –Ω–∞—à–µ–π –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–π –∂–∏–∑–Ω–∏ —Ä–∞—Å—Å–º–æ—Ç—Ä–∏–º –ø—Ä–æ—Å—Ç–µ–Ω—å–∫–∏–π –ø—Ä–∏–º–µ—Ä

```javascript
console.log ( "hello" )

new Promise (
    resolve => resolve ( "Promise successfully rejected" )
).then ( response => console.log ( response ) )

console.log ( "wait for promise" )
```

–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ —Ñ—É–Ω–∫—Ü–∏—è, –ø–µ—Ä–µ–¥–∞–Ω–Ω–∞—è –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä—É `Promise`, –æ—Ç–Ω—é–¥—å –Ω–µ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è

–û–¥–Ω–∞–∫–æ, –∑–∞–≤–µ—Ä–Ω—É–≤ –µ–µ –≤ –ø—Ä–æ–º–∏—Å, –º—ã —É–±—Ä–∞–ª–∏ –µ–µ –∏–∑ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø–æ—Ç–æ–∫–∞

–û–Ω–∞ –±—É–¥–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∞ —Ç–æ–≥–¥–∞, –∫–æ–≥–¥–∞ **`Call Stack`** –æ—Å–≤–æ–±–æ–¥–∏—Ç—Å—è, —Ç.–µ. –≤—Å–µ —Ç–µ–∫—É—â–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –ø–æ—Ç–æ–∫–µ –∑–∞–≤–µ—Ä—à–∞—Ç—Å—è

–≠—Ç–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –∏–∑–±–µ–∂–∞—Ç—å –±–ª–æ–∫–∏—Ä—É—é—â–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π

–ï—Å–ª–∏ –∫–∞–∫–æ–π-—Ç–æ —Ñ—Ä–∞–≥–º–µ–Ω—Ç –∫–æ–¥–∞ —Å–æ–¥–µ–∂–∏—Ç —Å–ª–∏—à–∫–æ–º "—Ç—è–∂–µ–ª–æ–≤–µ—Å–Ω—ã–µ" –≤—ã—á–∏—Å–ª–µ–Ω–∏—è –∏–ª–∏ –æ–ø–µ—Ä–∞—Ü–∏–∏, –∫–æ—Ç–æ—Ä—ã–µ –º–æ–≥—É—Ç –¥–ª–∏—Ç—å—Å—è –¥–æ—Å—Ç–∞—Ç–æ—á–Ω–æ –¥–æ–ª–≥–æ, —á—Ç–æ–±—ã –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞—Ç—å –æ—Å–Ω–æ–≤–Ω–æ–π –ø–æ—Ç–æ–∫ - –∑–∞–≤–µ—Ä–Ω–∏—Ç–µ —Ç–∞–∫–æ–π –∫–æ–¥ –≤ –ø—Ä–æ–º–∏—Å, –∏ –æ–Ω "—É–π–¥–µ—Ç" –≤ [**`Event Loop`**](event-loop)

–ü–æ—á—Ç–∏ –∞–Ω–∞–ª–æ–≥–∏—á–Ω–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –º–æ–∂–Ω–æ –¥–æ—Å—Ç–∏—á—å —Å –ø–æ–º–æ—â—å—é —Ç–∞–π–º–µ—Ä–∞ —Å –Ω—É–ª–µ–≤–æ–π –∑–∞–¥–µ—Ä–∂–∫–æ–π:

```javascript
console.log ( "start" )

setTimeout ( () => console.log ( "Time is over" ), 0 )

console.log ( "Application finished" )
```

–û–¥–Ω–∞–∫–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç —Å —Ç–∞–π–º–µ—Ä–æ–º –≤—Å–µ-—Ç–∞–∫–∏ –æ—Ç–ª–∏—á–∞–µ—Ç—Å—è –æ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ —Å –ø—Ä–æ–º–∏—Å–æ–º

–í –ø–µ—Ä–≤–æ–º —Å–ª—É—á–∞–µ ( —Å –ø—Ä–æ–º–∏—Å–æ–º ) –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –∑–∞–≤–µ—Ä—à–∞–µ—Ç —Ä–∞–±–æ—Ç—É, –ø–æ–∫–∞ –ø—Ä–æ–º–∏—Å –Ω–µ –≤–µ—Ä–Ω–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–í —Å–ª—É—á–∞–µ —Å —Ç–∞–π–º–µ—Ä–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–≤–µ—Ä—à–∏—Ç —Ä–∞–±–æ—Ç—É –∫ —Ç–æ–º—É –º–æ–º–µ–Ω—Ç—É, –∫–æ–≥–¥–∞ –∫–æ–ª–±—ç–∫ —Ç–∞–π–º–µ—Ä–∞ —Å—Ä–∞–±–æ—Ç–∞–µ—Ç

```javascript
console.log ( "Start" )

setTimeout ( () => console.log ( "Timeout is over" ), 0 )

let promise = new Promise (
    resolve => resolve ( "Promise successfully resolved" )
)

promise.then ( response => console.log ( response ) )

console.log ( "Finish" )
```

–ó–∞–ø—É—Å—Ç–∏—Ç–µ —ç—Ç–æ—Ç –∫–æ–¥ –≤ –∫–æ–Ω—Å–æ–ª–∏ –∏ –æ–±—Ä–∞—Ç–∏–µ –≤–Ω–∏–º–∞–Ω–∏–µ, —á—Ç–æ —Ç–∞–π–º–µ—Ä —Å—Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ—Å–ª–µ –ø—Ä–æ–º–∏—Å–∞, —Ö–æ—Ç—è –ø—Ä–æ–º–∏—Å –≤ –∫–æ–¥–µ —Å–ª–µ–¥—É–µ—Ç –∑–∞ —Ç–∞–π–º–µ—Ä–æ–º

```console
Start
Finish
Promise successfully rejected
undefined   // –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–¥–∞ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø–æ—Ç–æ–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–æ
Timeout is over
```

***

:coffee: :eight:

–û–±—Ä–∞—Ç–∏—Ç–µ –≤–Ω–∏–º–∞–Ω–∏–µ, –≤ –∫–∞–∫–æ–π –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –±—É–¥—É—Ç —Å—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å –∫–æ–ª–±—ç–∫–∏ –ø—Ä–æ–º–∏—Å–æ–≤

```javascript
console.log ( "–î–∏–∞–ª–æ–≥ –≤ —á–∞—Ç–µ" )

new Promise ( resolve => resolve ( "–ü—Ä–∏–≤–µ—Ç, —Ç–µ–±—è –∫–∞–∫ –∑–æ–≤—É—Ç?" ) )
    .then ( response => console.log ( response ) )
    .then ( () => console.log ( "–ê –º–µ–Ω—è –ú–∏—à–∞. –¢—ã –≥–¥–µ –∂–∏–≤–µ—à—å?" ) )
    .then ( () => console.log ( "–í–æ –õ—å–≤–æ–≤–µ. –¢—ã —Ä–∞–±–æ—Ç–∞–µ—à—å –∏–ª–∏ —É—á–∏—à—Å—è?" ) )
    .then ( () => console.log ( "–Ø —Ç–æ–∂–µ. –õ–∞–¥–Ω–æ, –¥–æ —Å–≤—è–∑–∏, —É–¥–∞—á–∏!" ) )

new Promise ( resolve => resolve ( "–ü—Ä–∏–≤–µ—Ç, –ú–∞—à–∞, –∞ —Ç–µ–±—è?" ) )
    .then ( response => console.log ( response ) )
    .then ( () => console.log ( "–í –•–∞—Ä—å–∫–æ–≤–µ. –ê —Ç—ã –≥–¥–µ?" ) )
    .then ( () => console.log ( "–£—á—É—Å—å, –∏ —Ä–∞–±–æ—Ç–∞—é. –ê —Ç—ã?" ) )
    .then ( () => console.log ( "–°–ø–∞—Å–∏–±–æ, –∏ —Ç–µ–±–µ )" ) )

console.log ( "___________________" )
```

–ò–∑ —ç—Ç–æ–≥–æ –ø—Ä–∏–º–µ—Ä–∞ –æ—á–µ–≤–∏–¥–Ω–æ, —á—Ç–æ –ø—Ä–æ–º–∏—Å—ã –ø–æ–∑–≤–æ–ª—è—é—Ç –æ—Ä–≥–∞–Ω–∏–∑–æ–≤–∞—Ç—å –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–¥–∞