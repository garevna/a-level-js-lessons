# ![ico-40 hw] Экзаменационные задачи
____________________________________________________________

## ![ico-40 question] ( 10 баллов )

Откройте новую вкладку и перейдите по адресу
**_https://quotesondesign.com_**
Запрос будем делать из консоли этой вкладки
В вашем распоряжении есть итератор, который генерирует случайный **ID**, формирует **_endpoint_** и делает запрос к REST API

~~~js
const iterator = (
    async function* () {
        while ( true ) {
            let randomNum = Math.round ( Math.random() * 10000 )
            yield await (
                await fetch (`https://quotesondesign.com/wp-json/posts/${randomNum}`)
            ).json()
        }
    }  
)()
~~~

Вероятность благополучного завершения запроса очень невелика, поскольку такого **ID** может не оказаться в базе данных

В случае благополучного завершения запроса вы получите ответ следующей структуры:

~~~console
▼ { ID: 1902, title: "Rudy VanderLans", content: ..." }
    ID: 1902
    content: "<p>They enjoy giving form to ideas. If designers were made of ideas, they&#8217;d be their own clients.</p>↵"
    link: "https://quotesondesign.com/rudy-vanderlans/"
    title: "Rudy VanderLans"
  ► __proto__: Object
~~~

В противном случае ответ будет таким:

~~~console
▼ [{…}]
  ► 0: {code: "json_post_invalid_id", message: "Invalid post ID."}
    length: 1
  ► __proto__: Array(0)
~~~

Ваша задача:

Напилить код, который делает 100 попыток получить данные по случайно сгенерированным **ID**,
и в случае благополучного завершения выводит на страницу содержимое **title** и **content** полученного ответа,
а в случае ошибки ( если такого **ID** нет в базе данных ) выводит в консоль значение свойства **code** полученного ответа
^^После каждого вызова очищайте консоль^^

## ![ico-40 green-ok] Решение

~~~js
let iterator = ( async function* generator ( url ) {
    while ( true ) {
        let response = null
        while ( !response ) {
            let randomId = Math.round ( Math.random() * 10000 )
            response = await fetch ( `${url}${randomId}` )
                    .catch ( err => console.warn ( `❌ ${err}` ) )
                response.status !== 200 ? response = null : null
            console.clear()
        }
        yield await response.json()
    }
})("https://cors-anywhere.herokuapp.com/http://quotesondesign.com/wp-json/posts/")

const history = new Set

let show = async () => {
    let { ID: postId, title: author, content: text } = ( await iterator.next() ).value
    history.add ( postId )
    document.body.appendChild ( document.createElement ( "h3" ) ).innerHTML = author
    document.body.innerHTML += text
}
~~~

Теперь вызываем:

~~~js
item = 0

while ( item++ < 10 ) { show () }
~~~


По завершении работы цикла можно вывести объект **history** в консоль ![ico-20 wink]

___________________________________________________________

**Denial of Service** _отказ в обслуживании_ ( **DoS** )

 хакерская атака на вычислительную систему с целью довести её до отказа,
 то есть создание таких условий, при которых обычные пользователи системы 
 не смогут получить доступ к предоставляемым системным ресурсам (серверам), 
 либо этот доступ затруднён
 
 В настоящее время DoS и DDoS-атаки наиболее популярны,
 так как позволяют довести до отказа практически любую систему, не оставляя юридически значимых улик

^^**DDoS-атаки на уровне приложений**^^
^^Такие атаки обычно нацелены против приложений типа веб-сервер^^
^^Однако атаки на прикладном уровне уже распространяются и на CMS-платформы — WordPress, Joomla!, Drupal, Magento^^
^^Цель такой атаки — отключить приложение, онлайн-сервис или сайт^^
^^Обычно эти атаки небольшие, особенно по сравнению с атаками на уровне сети, но они могут нанести такой же урон^^
^^Например, небольшой VPS-сервер на Linode, Digital Ocean или Amazon может легко справиться со 100,000-200,000 пакетов в секунду^^
^^Однако сервер, работающий на WordPress или Joomla, едва сможет обработать 500 HTTP-запросов без того, чтобы не отключиться^^

^^**HTTP-флуд** - это самый примитивный вид DoS-атаки^^
^^Такие атаки сложно идентифицировать, так как запросы выглядят как обычный трафик^^
^^Запросы потребляют ресурсы сервера и приводят к падению сайта^^
^^Такие запросы также могут отправляться ботами, что делает атаки более мощными^^
^^Эти атаки мало зависят от пропускной способности канала, поэтому атакующие могут легко вывести сервер из строя^^
^^В зависимости от веб-сервера и стека приложений даже небольшое количество запросов в секунду может замедлить работу приложений и баз данных серверной части^^
^^_В среднем атаки, которые посылают более 100 запросов в секунду, могут выключить большинство сайтов среднего размера_^^
___________________________________________________________

[%%%exam%%%](https://garevna.github.io/js-quiz/#exam)