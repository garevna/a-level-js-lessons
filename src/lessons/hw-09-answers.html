<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no, minimal-ui">
    <meta charset="utf-8">
    <link rel="shortcut icon" href="../images/a-level-ico.png" type="image/x-icon">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto&display=swap">
    <script src="../rainbow.js"></script>
    <link rel="stylesheet" href="../for-rainbow.css">
    <title>Homework 9</title>
    <style>
        body { font-family: Roboto, Arial;  }
        pre { padding: 10px 20px; }
        h1 { color: #079; text-align: center; }
        h4 { color: #f50; }
    </style>
  </head>
  <body>
    <h4>1</h4>
    <pre>
      <code data-language="js">
function typeMessage ( message, velocity ) {
    var container = document.getElementById ( "demo" ) ?
        document.getElementById ( "demo" ) :
        document.body.appendChild (
            document.createElement ( "h3" )
        )
    container.style = `color: magenta;`
    message.split("").forEach (
        ( letter, index ) =>  setTimeout (
            () => container.textContent += letter,
            1000 * velocity * index
        )
    )
}

typeMessage ( `Welcome to the hell`, 1 )
      </code>
    </pre>

    <h4>2</h4>
    <pre>
      <code data-language="js">
var users = (
    function ( list ) {
        var users = []
        for ( var user of list )
            users.push ({
                name: user,
                present: false
            })

        return {
            setUserPresent ( userName, present ) {
                users.filter ( user => user.name === userName )[0].present = true
            },
            showPresent () {
                users.filter ( user => user.present )
                    .forEach ( user => console.log ( user ) )
            },
            showAbsent () {
                users.filter ( user => !user.present )
                    .forEach ( user => console.log ( user ) )
            }
        }
    }
)( [ "Иван", "Дмитрий", "Степан", "Михаил" ] )

users.showAbsent()
      </code>
    </pre>

    <h4>3</h4>
    <pre>
      <code language="js">
let changeClass = ( classname, styleString ) => (
    Array.from ( document.styleSheets )
        .filter ( sheet => !sheet.href )
            .map (
                sheet => Array.from ( sheet.cssRules )
                    .filter ( rule => rule.selectorText === `.${classname}` )
            )
            .filter ( item => item.length > 0 )
                .map (
                    item => item[0].cssText.split ( "}" )
                        .join ( `${styleString}}` )
                )
        ).length > 0 ? console.log ( "found" ) :
                       document.head.appendChild (
                           document.createElement ( "style" )
                       ).textContent = `.${classname} {${styleString}}`

changeClass ( "second-level-menu", "background-color: red!important;" )
      </code>
    </pre>
  </body>
</html>
